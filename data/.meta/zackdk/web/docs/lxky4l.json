{
  "id": 14357847,
  "slug": "lxky4l",
  "title": "JS知识点之作用域/执行上下文",
  "book_id": 231593,
  "book": {
    "id": 231593,
    "type": "Book",
    "slug": "web",
    "name": "WEB",
    "user_id": 284138,
    "description": "前端知识点记录",
    "creator_id": 284138,
    "public": 1,
    "items_count": 58,
    "likes_count": 0,
    "watches_count": 3,
    "content_updated_at": "2023-02-02T09:09:21.426Z",
    "updated_at": "2023-02-02T09:09:21.000Z",
    "created_at": "2019-03-07T05:05:08.000Z",
    "namespace": "zackdk/web",
    "user": {
      "id": 284138,
      "type": "User",
      "login": "zackdk",
      "name": "行一度空山",
      "description": null,
      "avatar_url": "https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1551934932702-d412771d-8d33-4694-9186-a749a3b4e05b.jpeg",
      "books_count": 2,
      "public_books_count": 1,
      "followers_count": 5,
      "following_count": 0,
      "created_at": "2019-03-07T05:02:38.000Z",
      "updated_at": "2023-02-01T12:18:25.000Z",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.book"
  },
  "user_id": 284138,
  "creator": {
    "id": 284138,
    "type": "User",
    "login": "zackdk",
    "name": "行一度空山",
    "description": null,
    "avatar_url": "https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1551934932702-d412771d-8d33-4694-9186-a749a3b4e05b.jpeg",
    "books_count": 2,
    "public_books_count": 1,
    "followers_count": 5,
    "following_count": 0,
    "created_at": "2019-03-07T05:02:38.000Z",
    "updated_at": "2023-02-01T12:18:25.000Z",
    "_serializer": "v2.user"
  },
  "format": "lake",
  "body": "\n<a name=\"r5OpT\"></a>\n## 作用域（Scope）\n\n> 作用域（scope，或译作有效范围）是名字（name）与实体（entity）的绑定（binding）保持有效的那部分计算机程序。（[维基百科](https://zh.wikipedia.org/wiki/%E4%BD%9C%E7%94%A8%E5%9F%9F)）\n> <br />\n> Typically, scope is used to manage the visibility and accessibility of variables from different parts of a program.([链接](http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-1-lexical-environments-common-theory/#scope))\n> <br />\n> Scope is an enclosing context in which a variable is associated with a value.([链接](http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-1-lexical-environments-common-theory/#scope))\n\n\n\n简单点说，作用域限定了变量的寻址范围。\n\n作用域还分动态作用域和静态作用域。具体区别参考[链接](https://www.yuque.com/zackdk/web/uikgt9)。<br />JS采用的是静态作用域，也叫词法作用域。\n\nJS里ES6之前，只有两种作用域，全局作用域，和函数作用域。\n\n<a name=\"O50lt\"></a>\n### 全局作用域\n\n全局作用域，声明的变量任何地方都可以访问得到。\n\n<a name=\"CB8lj\"></a>\n### 函数作用域\n\n顾名思义，定义一个函数就会生成函数作用域。在函数外部，是没法访问到，函数内部定义的变量的。\n\n```javascript\nfunction a (){\n\tvar b = 'inner function!';\n}\n\nconsole.log(b);//ReferenceError\n```\n\n<a name=\"aSUqk\"></a>\n### 块级作用域\n\ntodo。\n\n<a name=\"S1mEw\"></a>\n## 执行上下文（[Execution Contexts](https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts)）\n\n可以简单理解为代码执行时所在的环境。具体到JS来说，一开始执行代码时，就有一个全局的执行上下文，然后是各个函数执行时，会生成新的执行上下文。ES使用  [`stack`](https://zh.wikipedia.org/wiki/%E5%A0%86%E6%A0%88) 管理这些执行上下文。\n\n 另外值得一提的是，处于栈顶的执行上下文，称之为 `running execution context` ，即当前正在被执行的代码所属的上下文，同一时刻，有且只有一个 `running execution context  ` 。\n\n看下面这段代码：\n```javascript\nvar a = \"coffe\"; //1.进入全局执行上下文\nfunction out() {\n    var b = \"18\";\n    function inner() {\n        var c = \"91\";\n        console.log(a+b+c);\n    }\n    inner(); //3.进入inner函数的执行上下文\n}\nout(); //2.进入out函数的执行上下文\n```\n\n1. 一开始执行，就有一个全局的执行上下文。\n2. 调用out的时候，生成out函数的执行上下文。\n3. out函数内部调用inner的时候，生成inner函数的执行上下文。\n4. 当inner函数执行完，inner函数的执行上下文出栈。\n5. 随后out函数执行完，out函数的执行上下文出栈。\n6. 全局的执行上下文，会一直保持，直到整个JS脚本退出（标签页关闭）。\n\n\n![](https://cdn.nlark.com/yuque/0/2020/png/284138/1603089682868-1bc52fe8-393e-4c9a-bfad-01f3130b9207.png#align=left&display=inline&height=321&originHeight=321&originWidth=1259&size=0&status=done&style=none&width=1259)\n\n<a name=\"gDdJ1\"></a>\n### Execution Context的结构\n\nemmmm，或许说到执行上下文，你听过vo(变量对象)，ao（激活对象），scope chain（作用域链）等概念。可能看起来就像下面这样\n\n![](https://cdn.nlark.com/yuque/0/2020/png/284138/1603091269918-d86249a2-3a45-4c09-a165-809843b77bca.png#align=left&display=inline&height=270&originHeight=270&originWidth=600&size=0&status=done&style=none&width=600)\n\n当执行上下文开始执行代码的时候，vo就变成ao了。没错我一直一来也是这么理解，因为网上大部分文章都这样说。直到有一天有位大佬给我说这些概念过时了。然后几番周折，我确认了的确过时了。而且过时很久了。自ES5的时候，标准已经没有上述概念了。\n\n过程之中找到一些非常值得一读的文章，具体可以参考该文章[http://dmitrysoshnikov.com/](http://dmitrysoshnikov.com/)，是一些列解读JS内部实现的文章。\n\n\n忽略其它我们不需要在意的，最新的结构如下：\n\n![](https://cdn.nlark.com/yuque/0/2020/png/284138/1603245766347-e57d5020-33ae-4819-b58b-11d9a8ffbff8.png)其中 [`LexicalEnvironment` ](https://www.ecma-international.org/ecma-262/11.0/index.html#table-23)和 [`VariableEnvironment` ](https://www.ecma-international.org/ecma-262/11.0/index.html#table-23)都是一种叫 `[Lexical Environments](https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments)`  的类型。 （注意下类型的拼写和前面的是不同的，多了一个空格和s，被坑惨了）。\n\n**为了避免混淆，下文都用简写 `LE` 代替 `Lexical Environments` 类型。**\n\n如图所示 LE 由一个 `Environment Record` 和 一个指向外部 LE 的 引用（可能为null）构成。<br />`Environment Record`  则记录了出现在该上下文中所有变量的指向。（大概记录了 函数参数、函数内部声明的变量、this这几个东西）\n\n至于[`LexicalEnvironment` ](https://www.ecma-international.org/ecma-262/11.0/index.html#table-23)和 [`VariableEnvironment` ](https://www.ecma-international.org/ecma-262/11.0/index.html#table-23)的差异，暂时不能确定。摘抄标准中的两段话：\n\n> LexicalEnvironment，Identifies the [Lexical Environment](https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments) used to resolve identifier references made by code within this [execution context](https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts).\n> \n> VariableEnvironment，Identifies the [Lexical Environment](https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments) whose [EnvironmentRecord](https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments) holds bindings created by [VariableStatement](https://www.ecma-international.org/ecma-262/11.0/index.html#prod-VariableStatement)s within this [execution context](https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts).\n\n\n另外在[ECMA-262-5 in detail. Chapter 3.2. Lexical environments: ECMAScript implementation.](http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/#variable-environment)也提到了这两者之间的差异。\n\ntodo 弄明白两者之间的差异\n\n<a name=\"hkakX\"></a>\n### Environment Record的类型\n<a name=\"93Sdw\"></a>\n#### Declarative Environment Records\n<a name=\"1LN1r\"></a>\n#### Object Environment Records\n<a name=\"xIvk4\"></a>\n#### Function Environment Records\n<a name=\"i51fx\"></a>\n#### Global Environment Records\n<a name=\"IY7bn\"></a>\n#### Module Environment Records\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
  "body_draft": "",
  "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine lake-typography-classic\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B55%2C0%2C1%5D%2C%5B55%2C0%2C1%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h2 data-lake-id=\"310ed7ec7004ededd0c92cb4aa3dcaec\" id=\"r5OpT\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 24px; line-height: 32px;\">作用域（Scope）</h2><p data-lake-id=\"8feb552223dc68655085ed688712c4e1\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><blockquote style=\"margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;\"><p data-lake-id=\"a1cce686694011ea7b191e69f3a3cbbf\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\">作用域（scope，或译作有效范围）是名字（name）与实体（entity）的绑定（binding）保持有效的那部分计算机程序。</span><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\">（</span><span class=\"lake-fontsize-1515\" data-mce-style=\"font-size: 15px\" style=\"font-size: 15px;\"><a href=\"https://zh.wikipedia.org/wiki/%E4%BD%9C%E7%94%A8%E5%9F%9F\" target=\"_blank\">维基百科</a>）</span></p><p data-lake-id=\"be057a4f95a691de919615b6a618924c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" data-mce-style=\"font-size: 15px\" style=\"font-size: 15px;\"><br></span></p><p data-lake-id=\"8aca459822885db15f0bdd6677b1d6c5\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\">Typically, scope is used to manage the visibility and accessibility of variables from different parts of a program.</span><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: rgb(0, 0, 0); font-size: 14px;\" data-mce-style=\"font-size: 11px\">(</span><a href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-1-lexical-environments-common-theory/#scope\" target=\"_blank\"><span class=\"lake-fontsize-11\" data-mce-style=\"font-size: 11px\" style=\"font-size: 14px;\">链接</span></a><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: rgb(0, 0, 0); font-size: 14px;\" data-mce-style=\"font-size: 11px\">)</span></p><p data-lake-id=\"f975052c6a24a98fe4b8efef46009280\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\"><br></span></p><p data-lake-id=\"f00c118105433647854eb427fee10165\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\">Scope is an enclosing context in which a variable is associated with a value.</span><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: rgb(0, 0, 0); font-size: 14px;\" data-mce-style=\"font-size: 11px\">(</span><a href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-1-lexical-environments-common-theory/#scope\" target=\"_blank\"><span class=\"lake-fontsize-11\" data-mce-style=\"font-size: 11px\" style=\"font-size: 14px;\">链接</span></a><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: rgb(0, 0, 0); font-size: 14px;\" data-mce-style=\"font-size: 11px\">)</span></p></blockquote><p data-lake-id=\"1475cb32709b12a73ecce6188940ee35\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\"><br></span></p><p data-lake-id=\"e91f2884ab230488e65809c841938dd6\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\">简单点说，作用域限定了变量的寻址范围。</span></p><p data-lake-id=\"2471ae656c502ea28ea43748c96b9e23\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span class=\"lake-fontsize-1515\" style=\"color: rgb(32, 33, 34); font-size: 15px;\" data-mce-style=\"font-size: 15px\"><br></span></p><p data-lake-id=\"c87ff4afbaa03acf9650177eb407d839\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">作用域还分动态作用域和静态作用域。具体区别参考<a target=\"_blank\" href=\"https://www.yuque.com/zackdk/web/uikgt9\">链接</a>。</p><p data-lake-id=\"ebca0850c29ddcaab9b4a4f328370d64\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">JS采用的是静态作用域，也叫词法作用域。</p><p data-lake-id=\"8886ac5f3aa83b8d0957a539029e3866\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"108a916ac7e133fc0b3b191fc7895161\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">JS里ES6之前，只有两种作用域，全局作用域，和函数作用域。</p><p data-lake-id=\"8866536b4b83204b887be010ce9b497c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"0b79ffd82a859fef7790f45d83db6f3f\" id=\"O50lt\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">全局作用域</h3><p data-lake-id=\"a47c3fdfadfd3e73107176ed7164a75b\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"597eb01e085144b81a2cc123ac236f85\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">全局作用域，声明的变量任何地方都可以访问得到。</p><p data-lake-id=\"4d37aa54b24d55339c0c34ae8aa3aad3\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"d0b9547320b0d975e94ce6c978194fe4\" id=\"CB8lj\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">函数作用域</h3><p data-lake-id=\"b5563d761e7912c7a2a685e0d354e884\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"d3e5de2eb7215223580453a2755eeda8\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">顾名思义，定义一个函数就会生成函数作用域。在函数外部，是没法访问到，函数内部定义的变量的。</p><p data-lake-id=\"c86864c17e93c7bf8d95b54939a2ec96\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"MiXnC\" class=\"lake-card-margin\" data-language=\"javascript\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">function</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">a</span> (){\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">var</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">b</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">'inner function!'</span>;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">}\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">console</span>.<span class=\"cm-property\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">log</span>(<span class=\"cm-variable-2\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">b</span>);<span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">//ReferenceError</span></span></span></pre></div></div></div><p data-lake-id=\"c29f1cc1cc4863d96c45092efa3cf4b2\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"e1aa856d852cc15018f6487cd516afb0\" id=\"aSUqk\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">块级作用域</h3><p data-lake-id=\"a3975ffa0cefbe4bbb225dc93c339584\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"62af2fa6e0725cded18a15cd9251ec87\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">todo。</p><p data-lake-id=\"d83cca2a5d1b40be613d5d98bdcb799e\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h2 data-lake-id=\"d11d434af2aa406b6f8fc9664e09369b\" id=\"S1mEw\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 24px; line-height: 32px;\">执行上下文（<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts\" target=\"_blank\">Execution Contexts</a>）</h2><p data-lake-id=\"ab48896b564e005cb7d18523ee3c5023\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"2e640981adcd840a2889859712b81d48\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">可以简单理解为代码执行时所在的环境。具体到JS来说，一开始执行代码时，就有一个全局的执行上下文，然后是各个函数执行时，会生成新的执行上下文。ES使用  <a href=\"https://zh.wikipedia.org/wiki/%E5%A0%86%E6%A0%88\" target=\"_blank\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">stack</code></a>&nbsp;管理这些执行上下文。</p><p data-lake-id=\"112a78159b6d6e0ae96bb04866730120\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"4985e0a083a46809844f3e00475710c8\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">&nbsp;另外值得一提的是，处于栈顶的执行上下文，称之为 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">running execution context</code>&nbsp;，即当前正在被执行的代码所属的上下文，同一时刻，有且只有一个 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\"><span>running execution context  </span></code> 。</p><p data-lake-id=\"b1e70227fcf59e27175cbe8689e0b732\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"49b174e75106246e419a29fa66e3acca\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">看下面这段代码：</p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"5dQJB\" class=\"lake-card-margin\" data-language=\"javascript\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">var</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">a</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"coffe\"</span>; <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">//1.进入全局执行上下文</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">function</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">out</span>() {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">var</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">b</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"18\"</span>;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">function</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">inner</span>() {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">var</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">c</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"91\"</span>;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">console</span>.<span class=\"cm-property\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">log</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">a</span><span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">+</span><span class=\"cm-variable-2\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">b</span><span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">+</span><span class=\"cm-variable-2\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">c</span>);\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    }\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-variable-2\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">inner</span>(); <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">//3.进入inner函数的执行上下文</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">}\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">out</span>(); <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">//2.进入out函数的执行上下文</span></span></span></pre></div></div></div><p data-lake-id=\"dbd72bc4d81dcae9617904c21f104466\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><ol data-lake-id=\"3d38aca71425385bfa60cbbb2101eacc\" start=\"1\" lake-indent=\"0\" style=\"list-style-type: decimal; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li data-lake-id=\"9b356abc05a73fcfcc900cc6589e68df\">一开始执行，就有一个全局的执行上下文。</li><li data-lake-id=\"a4c6c2c65ddd963cf3a477c4461c8c3a\">调用out的时候，生成out函数的执行上下文。</li><li data-lake-id=\"b927402d0b9ce53e35a7beb87e07a381\">out函数内部调用inner的时候，生成inner函数的执行上下文。</li><li data-lake-id=\"dbec5c4e4afc1588eba50f51b988df95\">当inner函数执行完，inner函数的执行上下文出栈。</li><li data-lake-id=\"56c8ad0d83188768dca08346a1fbc7ce\">随后out函数执行完，out函数的执行上下文出栈。</li><li data-lake-id=\"59c4ae71453db2af43801afa514ddd42\">全局的执行上下文，会一直保持，直到整个JS脚本退出（标签页关闭）。</li></ol><p data-lake-id=\"f9ca53dcd210dfe56cc21ff5104dd50d\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"50d55395db2d1d4407ffea153b3c5b4d\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"005d25f791e1d0f4eaa3129c04b40dcf\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span data-card-type=\"inline\" data-lake-card=\"image\"><img data-role=\"image\" src=\"https://cdn.nlark.com/yuque/0/2020/png/284138/1603089682868-1bc52fe8-393e-4c9a-bfad-01f3130b9207.png\" data-raw-src=\"\" class=\"image lake-drag-image\" alt=\"image\" title=\"image\" data-height=\"321px\" style=\"visibility: visible; width: 1259px;\"></span></p><p data-lake-id=\"42772067c296658749fdb7c94cc04c32\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"340e81e0e953ea3ad7e1fcfce4408c34\" id=\"gDdJ1\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">Execution Context的结构</h3><p data-lake-id=\"4e7d3917c332837dbc54f38b35bd1d7f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"5d31df758ebd3eb80bfb339fbf37adfc\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">emmmm，或许说到执行上下文，你听过vo(变量对象)，ao（激活对象），scope chain（作用域链）等概念。可能看起来就像下面这样</p><p data-lake-id=\"17e8355bdc05ec0c610f548f1d9ea1b2\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"3eb23f016bef085d9e67d5ac403429d8\" style=\"text-align: center; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span data-card-type=\"inline\" data-lake-card=\"image\"><img data-role=\"image\" src=\"https://cdn.nlark.com/yuque/0/2020/png/284138/1603091269918-d86249a2-3a45-4c09-a165-809843b77bca.png\" data-raw-src=\"\" class=\"image lake-drag-image\" alt=\"image\" title=\"image\" data-height=\"270px\" style=\"visibility: visible; width: 600px;\"></span></p><p data-lake-id=\"6b48718d8106cf3f953eb2dd5e63b10e\" style=\"text-align: center; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"91bc0983bff6bec41e226226e437afc6\" style=\"text-align: left; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">当执行上下文开始执行代码的时候，vo就变成ao了。没错我一直一来也是这么理解，因为网上大部分文章都这样说。直到有一天有位大佬给我说这些概念过时了。然后几番周折，我确认了的确过时了。而且过时很久了。自ES5的时候，标准已经没有上述概念了。</p><p data-lake-id=\"9006ce3d42daaf79db6c8148dec4f5b3\" style=\"text-align: left; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"ac19ef20168768d72ed618ab906d6a1a\" style=\"text-align: left; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">过程之中找到一些非常值得一读的文章，具体可以参考该文章<a href=\"http://dmitrysoshnikov.com/\" target=\"_blank\">http://dmitrysoshnikov.com/</a>，<span>是一些列解读JS内部实现的文章。</span></p><p data-lake-id=\"d34c216be19836fda667e6a8bfa6e818\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"7b42bb8942fb8f74aea57a940a122231\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"5ac9970b6cd7720af1714fe9f2279962\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">忽略其它我们不需要在意的，最新的结构如下：</p><p data-lake-id=\"ae9556e005beaa0988737bfc2bd24978\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><div data-card-type=\"block\" data-lake-card=\"mindmap\" id=\"DE6wg\" class=\"lake-card-margin\" data-cell_count=\"13\"><img src=\"https://cdn.nlark.com/yuque/0/2020/png/284138/1603245766347-e57d5020-33ae-4819-b58b-11d9a8ffbff8.png\"></div><p data-lake-id=\"363bbe63df5d1d6ecdc57a424deb5489\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">其中 <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">LexicalEnvironment</code>&nbsp;</a>和 <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">VariableEnvironment</code>&nbsp;</a>都是一种叫 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\"><a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">Lexical Environments</a></code>&nbsp; 的类型。 （注意下类型的拼写和前面的是不同的，多了一个空格和s，被坑惨了）。</p><p data-lake-id=\"af66d6bbf829f2c271f5baadf72cd87f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"> </p><p data-lake-id=\"be1044dc2ab5ca7dc7faaecaf4a34b0f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><strong>为了避免混淆，下文都用简写 </strong><strong><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">LE</code></strong><strong>&nbsp;代替 </strong><strong><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">Lexical Environments</code></strong><strong>&nbsp;类型。</strong></p><p data-lake-id=\"db473d296c601aacf4fb00191dfe726f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"b38b551b532286a138f0be7ac0f9be52\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">如图所示 LE 由一个 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">Environment Record</code>&nbsp;和 一个指向外部 LE 的 引用（可能为null）构成。</p><p data-lake-id=\"3d3d700925b8e057c0f28241e1dbf0f1\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\"><span>Environment Record</span></code>  则记录了出现在该上下文中所有变量的指向。（大概记录了 函数参数、函数内部声明的变量、this这几个东西）</p><p data-lake-id=\"c82c8987d59ab6f0823bd44a5c26a1e2\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"86e9251c01b9077d37c66ed2817b9fb1\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">至于<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">LexicalEnvironment</code> </a>和 <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">VariableEnvironment</code> </a>的差异，暂时不能确定。摘抄标准中的两段话：</p><p data-lake-id=\"32489e182cc71d45a010f549577df44c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><blockquote style=\"margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;\"><p data-lake-id=\"df6f295d33f4ab64ef657c7ae9556226\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">LexicalEnvironment，Identifies the&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">Lexical Environment</a>&nbsp;used to resolve identifier references made by code within this&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts\" target=\"_blank\">execution context</a>.</p><p data-lake-id=\"e7f185cd3873a1b066a5938dfe7bc26d\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"66df2d3c3afaeb3e74f4d7a8ed9f2090\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">VariableEnvironment，Identifies the&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">Lexical Environment</a>&nbsp;whose&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">EnvironmentRecord</a>&nbsp;holds bindings created by&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#prod-VariableStatement\" target=\"_blank\">VariableStatement</a>s within this&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts\" target=\"_blank\">execution context</a>.</p></blockquote><p data-lake-id=\"73df67b5650fd9388c5e7b5cc67ffbb5\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"6e13dab00323f5f84dc240a8d0d7cc30\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">另外在<a target=\"_blank\" href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/#variable-environment\">ECMA-262-5 in detail. Chapter 3.2. Lexical environments: ECMAScript implementation.</a>也提到了这两者之间的差异。</p><p data-lake-id=\"e6cccfd0cc978ab386ba2bcdddc42f91\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"2a4b572b3f9b7f426d38251bec1f69a7\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">todo 弄明白两者之间的差异</p><p data-lake-id=\"158e0f6f6e08850b6eb37c71435950ab\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 data-lake-id=\"ffbbd3942f1091f1686a0ea2dd17edb1\" id=\"hkakX\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">Environment Record的类型</h3><h4 data-lake-id=\"9c4f54d40e2d267aca6903aa2e4ff9e7\" id=\"93Sdw\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">Declarative Environment Records</h4><h4 data-lake-id=\"110394ed283a55a258557d934497969b\" id=\"1LN1r\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">Object Environment Records</h4><h4 data-lake-id=\"14c25fe64722ad231ea86b1cbdcd22bd\" id=\"xIvk4\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">Function Environment Records</h4><h4 data-lake-id=\"9a6649ec54f1a5ea4d16d70edd8202ef\" id=\"i51fx\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">Global Environment Records</h4><h4 data-lake-id=\"741a2042d67a5fa113b34f94e27e4091\" id=\"IY7bn\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">Module Environment Records</h4><p data-lake-id=\"438bbbbe9378aee47ec3e49efd9e2059\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"b4f0f1491c2c417e57e198895a9178d5\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"947030829d67573c09c2e76442a2cdca\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"b6d99b275eef698297bd1283798e7611\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"af624cffb3ae42ae9af658fce69b97c8\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"f4ee98552971c382c9618fc2b29c8578\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"630bef04d96b4d368bf9485d14176e05\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"14e773297dabafcb7587b4cbca50f730\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"a5bf9d9c11a92b7eb0984cdc8e0f874c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"0d2425a1d402796df32f688453162b03\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"f6b801d7885a00dd4a43850cfdd2386a\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"890f51a0db19868349a30d5e6933d6d6\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"0f1ebd498ce11f4113deffe4479f0f4a\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"2113d1862279a9d531684a921aade11e\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"d03e1d4a883845f01da32caa759d916c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"c2dc7935870dfdcf9eac54b935159e33\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"adc499b604baed7b46c6c7829fe36381\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"db55fe982293f8b26bcf049bb7c11dcc\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"90376257f99ed386e6ffa0e4c993fbc6\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"3403b91c1bc5df83e631475bb42f5c57\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"8ce1cb8b2adf7a836c553d168111bfa1\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"7938ed21f8f5e322ed274d79fc56eb86\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"382dccf3deb8387660e1aef22f844e34\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"62722326bc1c9017c14d53b8af5e6329\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"160d18458ccf4af1e29602cab991ffc0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"af257f16bf02ec856afe9d5374b663b9\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"46b659cf47e5e6b6a590d0dc04373140\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"a1f1b40398ebd5240f1c1bfb60bc815e\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"e94002b46c37ee21a88d6eb0d14f7e5a\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"cab877762ca1589bd0428b9c2ba8092c\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"e384f2dc6ec8467be0443063860795e7\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"06bb38486a49113defa527f64e3773ff\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p></div>",
  "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"adapt\" /><meta name=\"typography\" content=\"classic\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"><br /></p><h2 data-lake-id=\"310ed7ec7004ededd0c92cb4aa3dcaec\" id=\"r5OpT\">作用域（Scope）</h2><p data-lake-id=\"8feb552223dc68655085ed688712c4e1\"><br /></p><blockquote><p data-lake-id=\"a1cce686694011ea7b191e69f3a3cbbf\"><span class=\"lake-fontsize-1515\" style=\"color: #202122;\">作用域（scope，或译作有效范围）是名字（name）与实体（entity）的绑定（binding）保持有效的那部分计算机程序。</span><span class=\"lake-fontsize-1515\" style=\"color: #202122;\">（</span><span class=\"lake-fontsize-1515\"><a href=\"https://zh.wikipedia.org/wiki/%E4%BD%9C%E7%94%A8%E5%9F%9F\" target=\"_blank\">维基百科</a>）</span></p><p data-lake-id=\"be057a4f95a691de919615b6a618924c\"><span class=\"lake-fontsize-1515\"><br /></span></p><p data-lake-id=\"8aca459822885db15f0bdd6677b1d6c5\"><span class=\"lake-fontsize-1515\" style=\"color: #202122;\">Typically, scope is used to manage the visibility and accessibility of variables from different parts of a program.</span><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: #000000;\">(</span><a href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-1-lexical-environments-common-theory/#scope\" target=\"_blank\"><span class=\"lake-fontsize-11\">链接</span></a><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: #000000;\">)</span></p><p data-lake-id=\"f975052c6a24a98fe4b8efef46009280\"><span class=\"lake-fontsize-1515\" style=\"color: #202122;\"><br /></span></p><p data-lake-id=\"f00c118105433647854eb427fee10165\"><span class=\"lake-fontsize-1515\" style=\"color: #202122;\">Scope is an enclosing context in which a variable is associated with a value.</span><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: #000000;\">(</span><a href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-1-lexical-environments-common-theory/#scope\" target=\"_blank\"><span class=\"lake-fontsize-11\">链接</span></a><span class=\"lake-fontsize-11\" style=\"background-color: transparent; color: #000000;\">)</span></p></blockquote><p data-lake-id=\"1475cb32709b12a73ecce6188940ee35\"><span class=\"lake-fontsize-1515\" style=\"color: #202122;\"><br /></span></p><p data-lake-id=\"e91f2884ab230488e65809c841938dd6\"><span class=\"lake-fontsize-1515\" style=\"color: #202122;\">简单点说，作用域限定了变量的寻址范围。</span></p><p data-lake-id=\"2471ae656c502ea28ea43748c96b9e23\"><span class=\"lake-fontsize-1515\" style=\"color: #202122;\"><br /></span></p><p data-lake-id=\"c87ff4afbaa03acf9650177eb407d839\">作用域还分动态作用域和静态作用域。具体区别参考<a target=\"_blank\" href=\"https://www.yuque.com/zackdk/web/uikgt9\">链接</a>。</p><p data-lake-id=\"ebca0850c29ddcaab9b4a4f328370d64\">JS采用的是静态作用域，也叫词法作用域。</p><p data-lake-id=\"8886ac5f3aa83b8d0957a539029e3866\"><br /></p><p data-lake-id=\"108a916ac7e133fc0b3b191fc7895161\">JS里ES6之前，只有两种作用域，全局作用域，和函数作用域。</p><p data-lake-id=\"8866536b4b83204b887be010ce9b497c\"><br /></p><h3 data-lake-id=\"0b79ffd82a859fef7790f45d83db6f3f\" id=\"O50lt\">全局作用域</h3><p data-lake-id=\"a47c3fdfadfd3e73107176ed7164a75b\"><br /></p><p data-lake-id=\"597eb01e085144b81a2cc123ac236f85\">全局作用域，声明的变量任何地方都可以访问得到。</p><p data-lake-id=\"4d37aa54b24d55339c0c34ae8aa3aad3\"><br /></p><h3 data-lake-id=\"d0b9547320b0d975e94ce6c978194fe4\" id=\"CB8lj\">函数作用域</h3><p data-lake-id=\"b5563d761e7912c7a2a685e0d354e884\"><br /></p><p data-lake-id=\"d3e5de2eb7215223580453a2755eeda8\">顾名思义，定义一个函数就会生成函数作用域。在函数外部，是没法访问到，函数内部定义的变量的。</p><p data-lake-id=\"c86864c17e93c7bf8d95b54939a2ec96\"><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22function%20a%20()%7B%5Cn%5Ctvar%20b%20%3D%20'inner%20function!'%3B%5Cn%7D%5Cn%5Cnconsole.log(b)%3B%2F%2FReferenceError%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22MiXnC%22%7D\"></card><p data-lake-id=\"c29f1cc1cc4863d96c45092efa3cf4b2\"><br /></p><h3 data-lake-id=\"e1aa856d852cc15018f6487cd516afb0\" id=\"aSUqk\">块级作用域</h3><p data-lake-id=\"a3975ffa0cefbe4bbb225dc93c339584\"><br /></p><p data-lake-id=\"62af2fa6e0725cded18a15cd9251ec87\">todo。</p><p data-lake-id=\"d83cca2a5d1b40be613d5d98bdcb799e\"><br /></p><h2 data-lake-id=\"d11d434af2aa406b6f8fc9664e09369b\" id=\"S1mEw\">执行上下文（<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts\" target=\"_blank\">Execution Contexts</a>）</h2><p data-lake-id=\"ab48896b564e005cb7d18523ee3c5023\"><br /></p><p data-lake-id=\"2e640981adcd840a2889859712b81d48\">可以简单理解为代码执行时所在的环境。具体到JS来说，一开始执行代码时，就有一个全局的执行上下文，然后是各个函数执行时，会生成新的执行上下文。ES使用  <a href=\"https://zh.wikipedia.org/wiki/%E5%A0%86%E6%A0%88\" target=\"_blank\"><code>stack</code></a> 管理这些执行上下文。</p><p data-lake-id=\"112a78159b6d6e0ae96bb04866730120\"><br /></p><p data-lake-id=\"4985e0a083a46809844f3e00475710c8\"> 另外值得一提的是，处于栈顶的执行上下文，称之为 <code>running execution context</code> ，即当前正在被执行的代码所属的上下文，同一时刻，有且只有一个 <code><span>running execution context  </span></code> 。</p><p data-lake-id=\"b1e70227fcf59e27175cbe8689e0b732\"><br /></p><p data-lake-id=\"49b174e75106246e419a29fa66e3acca\">看下面这段代码：</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22var%20a%20%3D%20%5C%22coffe%5C%22%3B%20%2F%2F1.%E8%BF%9B%E5%85%A5%E5%85%A8%E5%B1%80%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%5Cnfunction%20out()%20%7B%5Cn%20%20%20%20var%20b%20%3D%20%5C%2218%5C%22%3B%5Cn%20%20%20%20function%20inner()%20%7B%5Cn%20%20%20%20%20%20%20%20var%20c%20%3D%20%5C%2291%5C%22%3B%5Cn%20%20%20%20%20%20%20%20console.log(a%2Bb%2Bc)%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20inner()%3B%20%2F%2F3.%E8%BF%9B%E5%85%A5inner%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%5Cn%7D%5Cnout()%3B%20%2F%2F2.%E8%BF%9B%E5%85%A5out%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%225dQJB%22%7D\"></card><p data-lake-id=\"dbd72bc4d81dcae9617904c21f104466\"><br /></p><ol data-lake-id=\"3d38aca71425385bfa60cbbb2101eacc\" start=\"1\"><li data-lake-id=\"9b356abc05a73fcfcc900cc6589e68df\">一开始执行，就有一个全局的执行上下文。</li><li data-lake-id=\"a4c6c2c65ddd963cf3a477c4461c8c3a\">调用out的时候，生成out函数的执行上下文。</li><li data-lake-id=\"b927402d0b9ce53e35a7beb87e07a381\">out函数内部调用inner的时候，生成inner函数的执行上下文。</li><li data-lake-id=\"dbec5c4e4afc1588eba50f51b988df95\">当inner函数执行完，inner函数的执行上下文出栈。</li><li data-lake-id=\"56c8ad0d83188768dca08346a1fbc7ce\">随后out函数执行完，out函数的执行上下文出栈。</li><li data-lake-id=\"59c4ae71453db2af43801afa514ddd42\">全局的执行上下文，会一直保持，直到整个JS脚本退出（标签页关闭）。</li></ol><p data-lake-id=\"f9ca53dcd210dfe56cc21ff5104dd50d\"><br /></p><p data-lake-id=\"50d55395db2d1d4407ffea153b3c5b4d\"><br /></p><p data-lake-id=\"005d25f791e1d0f4eaa3129c04b40dcf\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F284138%2F1603089682868-1bc52fe8-393e-4c9a-bfad-01f3130b9207.png%22%2C%22originWidth%22%3A1259%2C%22originHeight%22%3A321%2C%22size%22%3A0%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22margin%22%3A%7B%22top%22%3Afalse%2C%22bottom%22%3Afalse%7D%2C%22width%22%3A1259%2C%22height%22%3A321%7D\"></card></p><p data-lake-id=\"42772067c296658749fdb7c94cc04c32\"><br /></p><h3 data-lake-id=\"340e81e0e953ea3ad7e1fcfce4408c34\" id=\"gDdJ1\">Execution Context的结构</h3><p data-lake-id=\"4e7d3917c332837dbc54f38b35bd1d7f\"><br /></p><p data-lake-id=\"5d31df758ebd3eb80bfb339fbf37adfc\">emmmm，或许说到执行上下文，你听过vo(变量对象)，ao（激活对象），scope chain（作用域链）等概念。可能看起来就像下面这样</p><p data-lake-id=\"17e8355bdc05ec0c610f548f1d9ea1b2\"><br /></p><p data-lake-id=\"3eb23f016bef085d9e67d5ac403429d8\" style=\"text-align: center;\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F284138%2F1603091269918-d86249a2-3a45-4c09-a165-809843b77bca.png%22%2C%22originWidth%22%3A600%2C%22originHeight%22%3A270%2C%22size%22%3A0%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22margin%22%3A%7B%22top%22%3Afalse%2C%22bottom%22%3Afalse%7D%2C%22width%22%3A600%2C%22height%22%3A270%7D\"></card></p><p data-lake-id=\"6b48718d8106cf3f953eb2dd5e63b10e\" style=\"text-align: center;\"><br /></p><p data-lake-id=\"91bc0983bff6bec41e226226e437afc6\" style=\"text-align: left;\">当执行上下文开始执行代码的时候，vo就变成ao了。没错我一直一来也是这么理解，因为网上大部分文章都这样说。直到有一天有位大佬给我说这些概念过时了。然后几番周折，我确认了的确过时了。而且过时很久了。自ES5的时候，标准已经没有上述概念了。</p><p data-lake-id=\"9006ce3d42daaf79db6c8148dec4f5b3\" style=\"text-align: left;\"><br /></p><p data-lake-id=\"ac19ef20168768d72ed618ab906d6a1a\" style=\"text-align: left;\">过程之中找到一些非常值得一读的文章，具体可以参考该文章<a href=\"http://dmitrysoshnikov.com/\" target=\"_blank\">http://dmitrysoshnikov.com/</a>，<span>是一些列解读JS内部实现的文章。</span></p><p data-lake-id=\"d34c216be19836fda667e6a8bfa6e818\"><br /></p><p data-lake-id=\"7b42bb8942fb8f74aea57a940a122231\"><br /></p><p data-lake-id=\"5ac9970b6cd7720af1714fe9f2279962\">忽略其它我们不需要在意的，最新的结构如下：</p><p data-lake-id=\"ae9556e005beaa0988737bfc2bd24978\"><br /></p><card type=\"block\" name=\"mindmap\" value=\"data:%7B%22diagramData%22%3A%22x%C2%9C%C2%AD%C2%94%C2%BDn%C3%94%40%5Cu0010%C3%87_%C3%85Z%C3%9A%C2%9Bh%C2%BF%C2%BC%5Cu001f%C3%A9(%C2%AE%40%C2%A2%C2%A2%C2%A0A)fwgs%5Cu0016%3E%3B%C3%B2%5D%C2%A2%C2%84%C3%A8%24%3A%5Cu0004%C2%A1%C2%A6%C2%A7%C3%A2%5Cu0015%C3%B2%3C(%C2%8Ax%5Cf%C3%96%C2%90%C3%A4%7C%C2%A0%5Cu000b)%C2%90%5Cu000b%7B%2C%C3%BB7%C2%B3%7F%C3%BF%C3%96%C2%97lA%C2%98%C3%98%C3%A1%25%3B%C2%A3a%C3%95%C3%B4%5Cu001d%3Bd%C3%B2%C2%80%5Cu001fp6c%C3%AB%C2%8B%5Cu0013*%C3%A5%C2%B2%C3%A9%C3%92%5Cu0012O%C3%98f%C3%86B%C2%9F.%C3%98%C3%A1%C2%9BK%C3%96%C2%94W%C2%98F%C2%AB%7D4%C2%A1%3C%C2%BAX%2F%C3%9Br%C3%A7%C3%B6%C3%A3%C2%B7%5Cu001f_%3F%C3%9F%5C%5C%7F%C2%BA%C2%B9%C2%BE%C2%BA%C3%BD%C3%B2%C3%A1%C3%BB%C3%BB%C2%AB%C2%BF13%5Cu0016%5Cu0017M%C2%9B%5Cu0006%C3%AA%C2%B6%24%C2%A7%C2%B8%5Cu000b%5C%22%C3%B8-%C3%A9%25%C2%9D7%5Cu0011%C3%9Byw%C3%96%5Cf%7D%C2%B7%C2%A4n%3D%C2%92%5Cu0006%C2%A2y%3A%C2%A6q%C3%9C%C3%95z%C3%A8%C3%9F%C2%8E%C3%9Cg%C3%8F%C2%A5%C2%B3s1%C2%8E%C2%B7%5Cu0003%C2%BE%5Cu0003au%C3%92%C2%AFVMh%2F%C2%AA%C3%AE%C2%B4m%C2%AB2%C3%93%40%C2%99%C3%8AS%C2%91%C2%AAu_aW%C3%B5%C2%A7k%5Cu001a%C2%AA%C2%BB%C2%8E%C3%95n%C3%8B_%C3%A3%C2%85%C3%AC%C3%89%C3%BBT%C2%83%C2%AB%5D%5Cu0004%5DG%5Cu0003%C3%A8%C2%B8%5Cu0004%C3%92%5C%5C%C2%85%5Cu0010%23%C3%96%5Cu0018w%C3%97u4c%C3%AF%5Et%C2%89%C3%8E%C3%99%C2%A1%C3%9C%C3%8C%5Cu001e%C2%86)%C3%8D'%C3%B8%C3%AA%5Cu0015%C3%85~H%C3%B7%5DP%C2%A4%C2%94%C2%84%C3%B4%C3%80%C2%A5%C3%92%C2%A0c%C2%AE%C3%81%3B%C2%A5%C3%80%5Cu0019A%C2%A4%5Cu0014'%C3%81%C3%BD%C2%9F%C3%A9m%C2%B9%C3%ABE%C2%B3%C2%BA'q%2F%C2%A4%C2%94%C3%86%C2%82%C2%89%C3%92%C2%82%26%25%5Cu0001%C2%ADr%C2%90mV%C3%A4%23E%C2%B2y%C3%AF%C2%BC~2o%C3%9B%C2%8F%C2%89%C2%9C%C3%A1%C3%90%60h%C3%A9%C2%81%C3%AF%C2%A3%C3%B6%C2%A5G%C2%86%3Aa%5Cu0006%5Cu001d%C2%A8%5Cu001e%C3%B3%400N%24D%5Cu0011%C2%AD%C3%87z%2F_%C3%B0I%5Cu0003%5Cu001c%C2%8EO%C3%87(%5Cu001e%C3%90u%C2%B2%C2%AE%C2%96%C3%9C%C2%80%C2%AFs%C2%89Z%25%5Cu0001(y%5Cu0004%C2%9F%C2%AC%5Cu00109q%C3%8AJ%C3%AEG%C2%8B%C3%8D%C2%A4R%C3%93B%C2%8CM%7F%C2%87c%C2%B4%C2%97Y%C3%85%C2%ADk%C2%AF%C3%AF%C3%96%C3%B7%5Cu0014%C3%99%C3%A6%C3%9A%C2%95c%C2%9Fl%C3%A5%3B%C3%BC%5Cu000f%C3%9Fx%26c%C2%B26%60%C2%A8N%C2%A0%C2%9DE%40%C2%A4%5C%22%C2%86%20e%C2%B8u%3E%C3%85%C2%B07%5Cu0004%C2%BD%C3%AB%C3%9B%C2%A3%C3%8Aei%5C%5CT%C3%9CB%5Cu001d%3C%5Cu0016Q%C2%A4%C2%82%C2%80J%C2%80%C3%8F%C2%BADm%C2%83%C3%B2%5E%3EM%C2%B9%C3%B2%C2%8D%C2%B2%C3%A5%C3%9C%C2%81%40W%C2%940%C2%AAl%C2%91%C2%8C%C2%A2%C3%A0%C2%A4%C2%AB%C3%91F%24e%C3%B7%C2%8El%C3%BE%C2%AD%5Cu001c%5Cu0019%C2%97%C3%88%C2%95H%C2%BCF%5Cu000eZXW%C2%AEb1%24iN%C3%8E%5Cu0004W%C3%94%C3%9B%C3%8B%C2%B7%C2%8F%5Cu0019%C2%87%5Cu0018%C2%92%5Cn%C3%9C%C2%83%5Cn%C2%A6l%C2%BBB%C2%82%60%C2%AC%5Cu0005%25%C2%A3%24%C2%89ZG%C2%BF%7F%C2%B3%C2%B8%C2%A9c%C3%B5%C2%B4%C3%A0cQ%C3%8E%20%C2%A5%C2%9D%C2%B1%C3%B2%C3%97%5Cu0004%C2%A5%26%3A%C3%8A%C3%8D%C3%91%C3%A6'%5Cu0007%C3%9B%C2%BAA%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22DE6wg%22%2C%22viewportSetting%22%3A%7B%22zoom%22%3A1.0499999999999998%2C%22scrollLeft%22%3A564%2C%22scrollTop%22%3A278%2C%22viewBox%22%3A%5B-870.8380952380953%2C-462.7380952380953%2C1979.6761904761906%2C910.4761904761906%5D%7D%2C%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F284138%2F1603245766347-e57d5020-33ae-4819-b58b-11d9a8ffbff8.png%22%2C%22search%22%3A%22%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E2%80%8B%20LexicalEnvironment%20a%20possibly%20null%20%E2%80%8Breference%20to%20an%20outer%20Lexical%20Environment%20%E2%80%8BEnvironment%20Record%20%E2%80%8Bthis%20local%20variables%20arguments%20VariableEnvironment%20%E2%80%8Ba%20possibly%20null%20%E2%80%8Breference%20to%20an%20outer%20Lexical%20Environment%20%E2%80%8B%E2%80%8BEnvironment%20Record%20%E2%80%8Bthis%20local%20variables%20arguments%22%7D\"></card><p data-lake-id=\"363bbe63df5d1d6ecdc57a424deb5489\">其中 <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code>LexicalEnvironment</code> </a>和 <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code>VariableEnvironment</code> </a>都是一种叫 <code><a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">Lexical Environments</a></code>  的类型。 （注意下类型的拼写和前面的是不同的，多了一个空格和s，被坑惨了）。</p><p data-lake-id=\"af66d6bbf829f2c271f5baadf72cd87f\"></p><p data-lake-id=\"be1044dc2ab5ca7dc7faaecaf4a34b0f\"><strong>为了避免混淆，下文都用简写 </strong><strong><code>LE</code></strong><strong> 代替 </strong><strong><code>Lexical Environments</code></strong><strong> 类型。</strong></p><p data-lake-id=\"db473d296c601aacf4fb00191dfe726f\"><br /></p><p data-lake-id=\"b38b551b532286a138f0be7ac0f9be52\">如图所示 LE 由一个 <code>Environment Record</code> 和 一个指向外部 LE 的 引用（可能为null）构成。</p><p data-lake-id=\"3d3d700925b8e057c0f28241e1dbf0f1\"><code><span>Environment Record</span></code>  则记录了出现在该上下文中所有变量的指向。（大概记录了 函数参数、函数内部声明的变量、this这几个东西）</p><p data-lake-id=\"c82c8987d59ab6f0823bd44a5c26a1e2\"><br /></p><p data-lake-id=\"86e9251c01b9077d37c66ed2817b9fb1\">至于<a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code>LexicalEnvironment</code> </a>和 <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#table-23\" target=\"_blank\"><code>VariableEnvironment</code> </a>的差异，暂时不能确定。摘抄标准中的两段话：</p><p data-lake-id=\"32489e182cc71d45a010f549577df44c\"><br /></p><blockquote><p data-lake-id=\"df6f295d33f4ab64ef657c7ae9556226\">LexicalEnvironment，Identifies the <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">Lexical Environment</a> used to resolve identifier references made by code within this <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts\" target=\"_blank\">execution context</a>.</p><p data-lake-id=\"e7f185cd3873a1b066a5938dfe7bc26d\"><br /></p><p data-lake-id=\"66df2d3c3afaeb3e74f4d7a8ed9f2090\">VariableEnvironment，Identifies the <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">Lexical Environment</a> whose <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-lexical-environments\" target=\"_blank\">EnvironmentRecord</a> holds bindings created by <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#prod-VariableStatement\" target=\"_blank\">VariableStatement</a>s within this <a href=\"https://www.ecma-international.org/ecma-262/11.0/index.html#sec-execution-contexts\" target=\"_blank\">execution context</a>.</p></blockquote><p data-lake-id=\"73df67b5650fd9388c5e7b5cc67ffbb5\"><br /></p><p data-lake-id=\"6e13dab00323f5f84dc240a8d0d7cc30\">另外在<a target=\"_blank\" href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/#variable-environment\">ECMA-262-5 in detail. Chapter 3.2. Lexical environments: ECMAScript implementation.</a>也提到了这两者之间的差异。</p><p data-lake-id=\"e6cccfd0cc978ab386ba2bcdddc42f91\"><br /></p><p data-lake-id=\"2a4b572b3f9b7f426d38251bec1f69a7\">todo 弄明白两者之间的差异</p><p data-lake-id=\"158e0f6f6e08850b6eb37c71435950ab\"><br /></p><h3 data-lake-id=\"ffbbd3942f1091f1686a0ea2dd17edb1\" id=\"hkakX\">Environment Record的类型</h3><h4 data-lake-id=\"9c4f54d40e2d267aca6903aa2e4ff9e7\" id=\"93Sdw\">Declarative Environment Records</h4><h4 data-lake-id=\"110394ed283a55a258557d934497969b\" id=\"1LN1r\">Object Environment Records</h4><h4 data-lake-id=\"14c25fe64722ad231ea86b1cbdcd22bd\" id=\"xIvk4\">Function Environment Records</h4><h4 data-lake-id=\"9a6649ec54f1a5ea4d16d70edd8202ef\" id=\"i51fx\">Global Environment Records</h4><h4 data-lake-id=\"741a2042d67a5fa113b34f94e27e4091\" id=\"IY7bn\">Module Environment Records</h4><p data-lake-id=\"438bbbbe9378aee47ec3e49efd9e2059\"><br /></p><p data-lake-id=\"b4f0f1491c2c417e57e198895a9178d5\"><br /></p><p data-lake-id=\"947030829d67573c09c2e76442a2cdca\"><br /></p><p data-lake-id=\"b6d99b275eef698297bd1283798e7611\"><br /></p><p data-lake-id=\"af624cffb3ae42ae9af658fce69b97c8\"><br /></p><p data-lake-id=\"f4ee98552971c382c9618fc2b29c8578\"><br /></p><p data-lake-id=\"630bef04d96b4d368bf9485d14176e05\"><br /></p><p data-lake-id=\"14e773297dabafcb7587b4cbca50f730\"><br /></p><p data-lake-id=\"a5bf9d9c11a92b7eb0984cdc8e0f874c\"><br /></p><p data-lake-id=\"0d2425a1d402796df32f688453162b03\"><br /></p><p data-lake-id=\"f6b801d7885a00dd4a43850cfdd2386a\"><br /></p><p data-lake-id=\"890f51a0db19868349a30d5e6933d6d6\"><br /></p><p data-lake-id=\"0f1ebd498ce11f4113deffe4479f0f4a\"><br /></p><p data-lake-id=\"2113d1862279a9d531684a921aade11e\"><br /></p><p data-lake-id=\"d03e1d4a883845f01da32caa759d916c\"><br /></p><p data-lake-id=\"c2dc7935870dfdcf9eac54b935159e33\"><br /></p><p data-lake-id=\"adc499b604baed7b46c6c7829fe36381\"><br /></p><p data-lake-id=\"db55fe982293f8b26bcf049bb7c11dcc\"><br /></p><p data-lake-id=\"90376257f99ed386e6ffa0e4c993fbc6\"><br /></p><p data-lake-id=\"3403b91c1bc5df83e631475bb42f5c57\"><br /></p><p data-lake-id=\"8ce1cb8b2adf7a836c553d168111bfa1\"><br /></p><p data-lake-id=\"7938ed21f8f5e322ed274d79fc56eb86\"><br /></p><p data-lake-id=\"382dccf3deb8387660e1aef22f844e34\"><br /></p><p data-lake-id=\"62722326bc1c9017c14d53b8af5e6329\"><br /></p><p data-lake-id=\"160d18458ccf4af1e29602cab991ffc0\"><br /></p><p data-lake-id=\"af257f16bf02ec856afe9d5374b663b9\"><br /></p><p data-lake-id=\"46b659cf47e5e6b6a590d0dc04373140\"><br /></p><p data-lake-id=\"a1f1b40398ebd5240f1c1bfb60bc815e\"><br /></p><p data-lake-id=\"e94002b46c37ee21a88d6eb0d14f7e5a\"><br /></p><p data-lake-id=\"cab877762ca1589bd0428b9c2ba8092c\"><br /></p><p data-lake-id=\"e384f2dc6ec8467be0443063860795e7\"><br /></p><p data-lake-id=\"06bb38486a49113defa527f64e3773ff\"><br /></p>",
  "body_draft_lake": "",
  "public": 1,
  "status": 1,
  "view_status": 0,
  "read_status": 1,
  "likes_count": 0,
  "comments_count": 0,
  "content_updated_at": "2020-10-21T02:02:55.000Z",
  "deleted_at": null,
  "created_at": "2020-10-14T02:59:58.000Z",
  "updated_at": "2020-11-26T09:01:14.000Z",
  "published_at": "2020-10-21T02:02:55.000Z",
  "first_published_at": "2020-10-21T02:02:55.000Z",
  "word_count": 1175,
  "cover": "https://cdn.nlark.com/yuque/0/2020/png/284138/1602661585565-3d5ade88-e630-4232-aa20-009a30cc0985.png",
  "description": "作用域（Scope）作用域（scope，或译作有效范围）是名字（name）与实体（entity）的绑定（binding）保持有效的那部分计算机程序。（维基百科）Typically, scope is used to manage the visibility and accessibility...",
  "custom_description": null,
  "hits": 12,
  "_serializer": "v2.doc_detail"
}