---
title: React 世界里的数据
publishedAt: '2022-11-29 10:11:37'
updatedAt: '2022-11-30 11:28:56'
summary: React 经常听说的状态管理，组件内部状态，还有 React 专有的 state ，其实都是数据，那它们有什么区别呢？
---

## 数据是什么

刚接触 React 的时候，有看到这样一个公式 `UI = fn(Data)` 。当时就觉得这个简洁，易懂。但是后面翻了很久官方文档，也没找到这个公式，
唯一有点关系的是 [Think In React](https://reactjs.org/docs/thinking-in-react.html) 这篇文章里提到的单向数据流。

>The component at the top of the hierarchy will take your data model as a prop. If you make a change to your underlying data model and call root.render() again, the UI will be updated. You can see how your UI is updated and where to make changes. React’s one-way data flow (also called one-way binding) keeps everything modular and fast.

我们这里聊的就是这个公式里的 `data` ，也就是数据。

如果用 JavaScript 的方式，数据就是一个普通对象。

然后结合上面那个公式，整个工作思路大概就类似下面这般，当然细节上肯定不是这样。

```js
// 声明数据对象
const data = { key : 'value' };

// 传递给 React 渲染出 UI
const UI = React(data);

// 修改数据对象
data.key = "hello world";

// 修改数据后，再次调用 React 渲染出 UI
const newUI = React(data);
```

其实我们平时编写的 React 代码，就是在编写 data 和 UI 之间的映射关系。
这样带来的最大好处是，这个映射关系确定后，我们就只需要关注数据了，数据变化了调用函数再次渲染就行了。
这种模式是十分简单而且符合直觉的。这可能也是我喜欢使用 React 的原因之一。

但在使用 React 这么多年后，上面这个公式其实是有适用范围的。

在功能唯一、简单的组件里，或者说页面完全是静态的内容，很少或者没有交互。完全适用于上面这种模式去理解。

但现在的 web 应用都越来越复杂了，逻辑也越来越多了。交互也越来越多，越发复杂。随之而来的数据量是巨大的，随之而来的也就是各种数据管理的库，那是后话了。


## React 把数据放在什么地方的

抛开 Class 组件，React 存放数据最常用的就是 `useState` hook 。对比一下纯 JS 的方式：

```js
// 声明数据
const data = { key : 'value' }; // JS
const [data,setData] = useState({ key: 'value' }); // React

// 修改数据
data.key = "hello world"; // JS
setData({ key : "hello world" }); // React

// 使用数据，都是直接使用 data 就行了
const UI = React(data); // JS & React
```

以上主要的区别是，使用 `useState` 声明的数据，需要使用专用的函数去修改，不能直接修改。这是为什么呢，因为如果你直接修改数据，修改完了就完了，React 并不会知道数据已经修改了，不会主动去渲染。
我们需要通过一个方式去告知 React 数据以及修改了，需要重新渲染了。使用专用的函数去修改数据，就是这个目的。

### Context



## 外部状态管理库中的数据


## 触发渲染的数据，不触发渲染的数据
